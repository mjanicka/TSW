<!DOCTYPE html>
<html>
<head>
<script type='text/javascript'>

	var ismousedown = 0;
	function mousedown(event) {
		var canvas=document.getElementById("mojCanvas");
		var x = event.clientX;
		var y = event.clientY;
		
		x -= canvas.offsetLeft;
		y -= canvas.offsetTop;
		
		var context = canvas.getContext('2d');
		context.rect(x,y,2,2);
		context.stroke();

		ismousedown = 1;
	}
	
	function mousemove(event){
		if(ismousedown == 1){
			var canvas=document.getElementById("mojCanvas");
			var x = event.clientX;
			var y = event.clientY;
		
			x -= canvas.offsetLeft;
			y -= canvas.offsetTop;
		
			var context = canvas.getContext('2d');
			context.rect(x,y,2,2);
			context.stroke();
		}
	}
	
	function mouseup(event){
		ismousedown = 0;
	}
	
	
    function czat(event){
		if(event.keyCode == 13){
			wyslij();	
		}
	}
	
	function wyslij(){
		var tekst=document.getElementById("wiadomosc");
			var poleczat=document.getElementById("czat");
			
			poleczat.innerHTML+="ja: " + tekst.value + "\n";
			tekst.value="";	
	}
	
	function init(){
		var canvas=document.getElementById("mojCanvas");
		var wpisz=document.getElementById("wiadomosc");
		canvas.onmousedown = mousedown;
		canvas.onmousemove = mousemove;
		canvas.onmouseup = mouseup;
		wpisz.onkeyup=czat;
    }
    
	
</script>
</head>
<body onLoad="init();">
	<div width="100" height="500" style="float:left">
		<canvas id="mojCanvas" width="800" height="600" style="border:1px solid #000000;"/>
	</div>
	<div width="1000" height="1000">
		
			<textarea name="czat" id="czat" cols="50" rows="20"></textarea>
			<br />
			<input type="text" id="wiadomosc" style="width: 420px"/>
			<button onclick="wyslij()" />
		
	</div>
</body>
</html>
